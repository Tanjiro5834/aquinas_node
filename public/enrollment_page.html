<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Enrollment Portal | Thomas Aquinas Institute</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap');
        
        :root {
            --navy: #0a1d37;
            --gold: #ffcc00;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: #1a1a1a;
            background-color: #ffffff;
        }

        .serif-font {
            font-family: 'Playfair Display', serif;
        }

        .bg-navy { background-color: var(--navy); }
        .text-navy { color: var(--navy); }
        .bg-gold { background-color: var(--gold); }
        .text-gold { color: var(--gold); }
        .border-navy { border-color: var(--navy); }
        .border-gold { border-color: var(--gold); }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0;
            font-size: 0.875rem;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--navy);
            box-shadow: none;
        }

        .btn-institutional {
            display: inline-block;
            padding: 0.75rem 2rem;
            background-color: var(--navy);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 1px solid var(--navy);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-institutional:hover {
            background-color: var(--gold);
            color: var(--navy);
            border-color: var(--gold);
        }

        .spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #ffffff;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nav-link {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-white">

    <!-- Navigation -->
    <nav class="bg-white sticky top-0 z-50 border-b border-gray-200">
        <div class="container mx-auto px-6 flex justify-between items-center h-20">
            <a href="index.php" class="flex items-center space-x-4">
                <div class="w-14 h-14 flex items-center justify-center overflow-hidden">
                    <img src="images/thomas_aquinas_logo.jpg" 
                        alt="Thomas Aquinas Institute Logo"
                        class="h-full w-auto object-contain">
                </div>
                <div>
                    <h1 class="text-navy font-bold leading-none tracking-tighter text-sm">THOMAS AQUINAS</h1>
                    <p class="text-[8px] uppercase tracking-[0.2em] text-gray-400 font-bold">Institute of Learning</p>
                </div>
            </a>
            <div class="hidden md:flex space-x-10">
                <a href="index.php" class="nav-link text-gray-500 hover:text-navy">The Institute</a>
                <a href="faculty.html" class="nav-link text-gray-500 hover:text-navy">Faculty</a>
                <a href="tuition.html" class="nav-link text-gray-500 hover:text-navy">Admissions</a>
            </div>
            <a href="index.php" class="btn-institutional px-6 py-2">Back to Portal</a>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="py-24 border-b border-gray-100 bg-gray-50">
        <div class="container mx-auto px-6 text-center">
            <span class="text-navy text-xs font-bold uppercase tracking-[0.3em] block mb-4">Admissions Office</span>
            <h2 class="serif-font text-5xl text-navy mb-6">Online Enrollment Portal</h2>
            <div class="w-24 h-1 bg-gold mx-auto mb-8"></div>
            <p class="text-gray-500 max-w-2xl mx-auto text-sm leading-relaxed">
                Welcome to the official pre-registration portal of Thomas Aquinas Institute of Learning. 
                Please ensure all information provided is accurate and matches your official civil documents.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-24">
        <div class="container mx-auto px-6">
            <div class="grid lg:grid-cols-2 gap-20 items-start">
                
                <!-- Left: Instructions & Requirements -->
                <div class="space-y-12">
                    <section>
                        <h3 class="serif-font text-3xl text-navy mb-8">Admission Requirements</h3>
                        <div class="space-y-6">
                            <div class="flex gap-6 pb-6 border-b border-gray-200">
                                <span class="font-bold text-navy text-xs tracking-widest pt-1">01</span>
                                <div>
                                    <h4 class="font-bold text-xs uppercase mb-2 tracking-wider">Birth Certificate</h4>
                                    <p class="text-gray-600 text-xs">Clear photocopy of PSA-issued Birth Certificate.</p>
                                </div>
                            </div>
                            <div class="flex gap-6 pb-6 border-b border-gray-200">
                                <span class="font-bold text-navy text-xs tracking-widest pt-1">02</span>
                                <div>
                                    <h4 class="font-bold text-xs uppercase mb-2 tracking-wider">Form 138 (Report Card)</h4>
                                    <p class="text-gray-600 text-xs">Original copy of the latest report card from the previous school year.</p>
                                </div>
                            </div>
                            <div class="flex gap-6 pb-6 border-b border-gray-200">
                                <span class="font-bold text-navy text-xs tracking-widest pt-1">03</span>
                                <div>
                                    <h4 class="font-bold text-xs uppercase mb-2 tracking-wider">Good Moral Character</h4>
                                    <p class="text-gray-600 text-xs">Certificate of Good Moral Character from the Principal or Guidance Counselor.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="p-10 border border-gray-200 bg-gray-50">
                        <h4 class="font-bold text-navy text-xs uppercase tracking-widest mb-4">Need Assistance?</h4>
                        <div class="space-y-4 text-sm">
                            <p class="text-gray-600 flex items-center gap-3">
                                <i class="fa-solid fa-phone text-gold text-xs"></i>
                                (046) 123-4567
                            </p>
                            <p class="text-gray-600 flex items-center gap-3">
                                <i class="fa-solid fa-envelope text-gold text-xs"></i>
                                admissions@aquinas-imus.edu.ph
                            </p>
                        </div>
                    </section>
                </div>

                <!-- Right: Enrollment Form -->
                <div class="bg-white border border-gray-200 shadow-sm p-12">
                    <div id="enrollmentFormContainer">
                        <div class="mb-10">
                            <h3 class="serif-font text-2xl text-navy mb-2">Pre-Registration Form</h3>
                            <p class="text-[10px] uppercase tracking-widest text-gray-400 font-bold">Academic Year 2026-2027</p>
                        </div>

                        <form id="enrollmentForm" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="firstName" class="block text-[10px] uppercase tracking-widest font-bold text-gray-500 mb-2">First Name</label>
                                    <input type="text" id="firstName" name="firstName" required class="form-input" placeholder="e.g. John" />
                                </div>
                                <div>
                                    <label for="lastName" class="block text-[10px] uppercase tracking-widest font-bold text-gray-500 mb-2">Last Name</label>
                                    <input type="text" id="lastName" name="lastName" required class="form-input" placeholder="e.g. Dela Cruz" />
                                </div>
                            </div>

                            <div>
                                <label for="email" class="block text-[10px] uppercase tracking-widest font-bold text-gray-500 mb-2">Email Address</label>
                                <input type="email" id="email" name="email" required class="form-input" placeholder="e.g. john.delacruz@email.com" />
                            </div>

                            <div>
                                <label for="guardianNumber" class="block text-[10px] uppercase tracking-widest font-bold text-gray-500 mb-2">Guardian Contact Number</label>
                                <input type="tel" id="guardianNumber" name="guardianNumber" required class="form-input" placeholder="e.g. 0912 345 6789" />
                            </div>

                            <div>
                                <label for="gradeLevel" class="block text-[10px] uppercase tracking-widest font-bold text-gray-500 mb-2">Incoming Grade Level</label>
                                <select id="gradeLevel" name="gradeLevel" required class="form-input bg-white">
                                    <option value="" disabled selected>Select Level</option>
                                    <option value="kinder-1">Kindergarten 1</option>
                                    <option value="kinder-2">Kindergarten 2</option>
                                    <option value="grade-1">Grade 1</option>
                                    <option value="grade-2">Grade 2</option>
                                    <option value="grade-3">Grade 3</option>
                                    <option value="grade-4">Grade 4</option>
                                    <option value="grade-5">Grade 5</option>
                                    <option value="grade-6">Grade 6</option>
                                    <option value="grade-6">Grade 7</option>
                                    <option value="grade-8">Grade 8</option>
                                    <option value="grade-9">Grade 9</option>
                                    <option value="grade-10">Grade 10</option>
                                    <option value="grade-11">Grade 11</option>
                                    <option value="grade-12">Grade 12</option>
                                </select>
                            </div>

                            <div class="pt-6">
                                <button type="submit" id="submitBtn" class="btn-institutional w-full">
                                    <span id="spinner" class="spinner" style="display: none;"></span>
                                    Submit Application
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Success Message -->
                    <div id="successMsg" class="hidden text-center py-12">
                        <div class="mb-8">
                            <i class="fa-solid fa-circle-check text-navy text-6xl"></i>
                        </div>
                        <h3 class="serif-font text-3xl text-navy mb-4">Application Received</h3>
                        
                        <div class="bg-gray-50 border border-gray-200 p-6 my-8 max-w-xs mx-auto">
                            <p class="text-[10px] uppercase tracking-[0.2em] text-gray-400 font-bold mb-2">Your Queue Number</p>
                            <p id="displayQueueNumber" class="serif-font text-4xl text-navy font-bold tracking-widest">PR-00000</p>
                        </div>

                        <div class="w-12 h-px bg-gold mx-auto mb-6"></div>
                        <p class="text-gray-600 text-sm leading-relaxed mb-8">
                            Thank you for choosing Thomas Aquinas Institute of Learning. Your pre-registration has been recorded. 
                            Please keep a copy of your queue number. Our admissions officer will contact you within 2-3 working days.
                        </p>
                        <a href="index.php" class="btn-institutional">Return to Home</a>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Footer -->
    

    <!-- JavaScript - Logic remains intact as requested -->
    <script>
      const enrollmentForm = document.getElementById("enrollmentForm");
      const submitBtn = document.getElementById("submitBtn");
      const spinner = document.getElementById("spinner");
      const successMsg = document.getElementById("successMsg");
      const formContainer = document.getElementById("enrollmentFormContainer");
      const displayQueueNumber = document.getElementById("displayQueueNumber")

      enrollmentForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        // UI State: Loading
        submitBtn.disabled = true;
        submitBtn.style.opacity = "0.7";
        spinner.style.display = "inline-block";

        const formData = new FormData(enrollmentForm);

        try {
          // Fetch logic remains identical to original
          const response = await fetch(
            "./api/pre_register.php",
            {
              method: "POST",
              headers: {
                  "Content-Type": "application/json"
              },
              body: JSON.stringify({
                  first_name: formData.get("firstName"),
                  last_name: formData.get("lastName"),
                  email: formData.get("email"),
                  contact_number: formData.get("guardianNumber"),
                  grade_level: formData.get("gradeLevel")
              })
            },
          );
          
          const result = await response.json();
          if (response.ok && result.success) {
                displayQueueNumber.innerText = result.queue_number;
                formContainer.classList.add("hidden");
                successMsg.classList.remove("hidden");
                
                // Optionally display the queue number generated by your Controller
                if(result.queue_number) {
                    console.log("Queue Number:", result.queue_number);
                }
            } else {
                console.error("Submission failed:", result);
                alert("Submission error: " + (result.message || "Please verify your data."));
                resetBtn();
            }
        } catch (error) {
          console.error("Error:", error);
          alert("Connection to the server failed.");
          resetBtn();
        }
      });

      function resetBtn() {
        submitBtn.disabled = false;
        submitBtn.style.opacity = "1";
        spinner.style.display = "none";
      }
    </script>
</body>
</html>